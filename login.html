<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login | PBridge</title>
  <link rel="stylesheet" href="style/login.css" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet" />
</head>
<body>
  <nav>
    <div class="logo">
      <img src="logo/logo-pbridge-transparent.png" alt="PBridge Logo" height="36" />
      <strong>PBridge</strong>
    </div>
    <div class="actions">
      <button id="lang-toggle">العربية</button>
    </div>
  </nav>

  <main>
    <div class="form-box">
      <h2 data-en="Login to your account" data-ar="تسجيل الدخول إلى حسابك">Login to your account</h2>
      <form id="loginForm">
        <label data-en="Email Address" data-ar="البريد الإلكتروني">Email Address</label>
        <input type="email" id="email" placeholder="you@example.com" required />

        <label data-en="Password" data-ar="كلمة المرور">Password</label>
        <input type="password" id="password" placeholder="••••••••" required />

        <label data-en="Login as" data-ar="تسجيل الدخول كـ">Login as</label>
        <select id="role">
          <option value="agent" data-en="Agent" data-ar="وكيل">Agent</option>
          <option value="trader" data-en="Trader" data-ar="تاجر">Trader</option>
          <option value="company" data-en="Company" data-ar="شركة">Company</option>
        </select>

        <p id="warning" style="color: red; display: none;" data-en="Invalid credentials" data-ar="بيانات الدخول غير صحيحة">Invalid credentials</p>

        <button type="submit" data-en="Log In" data-ar="تسجيل الدخول">Log In</button>
      </form>

      <p class="helper">
        <a href="signup.html" data-en="Create new account" data-ar="إنشاء حساب جديد">Create new account</a>
      </p>
    </div>
  </main>

  <script>
    let lang = "en";
    const toggleBtn = document.getElementById("lang-toggle");

    toggleBtn.onclick = () => {
      lang = lang === "en" ? "ar" : "en";
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
      toggleBtn.textContent = lang === "en" ? "العربية" : "English";
      document.querySelectorAll("[data-en]").forEach(el => {
        el.textContent = el.getAttribute(`data-${lang}`);
      });
      document.querySelectorAll("option").forEach(option => {
        option.textContent = option.getAttribute(`data-${lang}`);
      });
    };

    const form = document.getElementById("loginForm");
    const warning = document.getElementById("warning");

    form.onsubmit = e => {
      e.preventDefault();
      const saved = JSON.parse(localStorage.getItem("pbridgeUser"));
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();
      const role = document.getElementById("role").value;

      if (
        saved &&
        email === saved.email &&
        password === saved.password &&
        role === saved.role
      ) {
        localStorage.setItem("loggedIn", "true");
        window.location.href = "dashboard.html";
      } else {
        warning.style.display = "block";
        warning.textContent = warning.getAttribute(`data-${lang}`);
      }
    };
  </script>
</body>
</html>
