<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign Up | PBridge</title>
  <link rel="stylesheet" href="style/signup.css" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body>
  <nav>
    <div class="logo">
      <img src="logo/logo-pbridge-transparent.png" alt="PBridge Logo" height="36" />
      <strong>PBridge</strong>
    </div>
    <button id="lang-toggle">العربية</button>
  </nav>

  <main>
    <div class="signup-box">
      <h2 data-en="Create a new account" data-ar="إنشاء حساب جديد">Create a new account</h2>
      <form id="signupForm">
        <label data-en="Full Name" data-ar="الاسم الكامل">Full Name</label>
        <div class="input-icon">
          <i class="fa fa-user"></i>
          <input type="text" id="name" placeholder="Your name" required />
        </div>

        <label data-en="Email address" data-ar="البريد الإلكتروني">Email address</label>
        <div class="input-icon">
          <i class="fa fa-envelope"></i>
          <input type="email" id="email" placeholder="you@example.com" required />
        </div>

        <label data-en="Password" data-ar="كلمة المرور">Password</label>
        <div class="input-icon">
          <i class="fa fa-lock"></i>
          <input type="password" id="password" placeholder="••••••••" required />
        </div>

        <label data-en="Confirm Password" data-ar="تأكيد كلمة المرور">Confirm Password</label>
        <div class="input-icon">
          <i class="fa fa-check-double"></i>
          <input type="password" id="confirm" placeholder="••••••••" required />
        </div>

        <small id="match-warning" style="color: red; display: none;"></small>

        <label data-en="Register as" data-ar="تسجيل كـ">Register as</label>
        <div class="input-icon">
          <i class="fa fa-user-tag"></i>
          <select id="role" required>
            <option value="agent" data-en="Agent" data-ar="وكيل">Agent</option>
            <option value="trader" data-en="Trader" data-ar="تاجر">Trader</option>
            <option value="company" data-en="Company" data-ar="شركة">Company</option>
          </select>
        </div>

        <button type="submit" data-en="Sign Up" data-ar="إنشاء الحساب">Sign Up</button>
      </form>

      <p class="helper">
        <a href="login.html" data-en="Already have an account? Login" data-ar="هل لديك حساب؟ سجل الدخول">Already have an account? Login</a>
      </p>
    </div>
  </main>

  <script>
    const toggleBtn = document.getElementById("lang-toggle");
    let lang = "en";

    toggleBtn.onclick = () => {
      lang = (lang === "en") ? "ar" : "en";
      document.documentElement.lang = lang;
      document.documentElement.dir = (lang === "ar") ? "rtl" : "ltr";
      toggleBtn.textContent = (lang === "en") ? "العربية" : "English";
      document.querySelectorAll("[data-en]").forEach(el => {
        el.textContent = el.getAttribute(`data-${lang}`);
      });
      document.querySelectorAll("option").forEach(option => {
        option.textContent = option.getAttribute(`data-${lang}`);
      });
    };

    // تخزين البيانات والتحقق
    const form = document.getElementById("signupForm");
    const name = document.getElementById("name");
    const email = document.getElementById("email");
    const password = document.getElementById("password");
    const confirm = document.getElementById("confirm");
    const role = document.getElementById("role");
    const warning = document.getElementById("match-warning");

    form.addEventListener("submit", function(e) {
      if (password.value !== confirm.value) {
        e.preventDefault();
        warning.textContent = (lang === "ar")
          ? "كلمتا المرور غير متطابقتين"
          : "Passwords do not match";
        warning.style.display = "block";
        return;
      }

      // حفظ البيانات في localStorage
      const user = {
        name: name.value,
        email: email.value,
        password: password.value,
        role: role.value
      };
      localStorage.setItem("pbridgeUser", JSON.stringify(user));
      
      // إعادة التوجيه إلى صفحة تسجيل الدخول
      window.location.href = "login.html";
    });
  </script>
</body>
</html>
